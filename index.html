<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCF authentification</title>
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
	<link href="./images/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
	<link href="./images/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            max-width: 100%;
            width: 100vw;
            height: 100vh;
            box-sizing: border-box;
            background-size: contain;
        }

        .header {
            width: 100vw;
            height: fit-content;
            overflow: hidden;
            margin-bottom: 3px;
        }

        .header img {
            width: 100vw;
            height: 100px;
            display: block;
        }

        .attention {
            width: 80%;
            background-color: #fff3cd;
            padding: 15px;
            border: 1px solid #ffeeba;
            margin-bottom: 15px;
            font-size: 1rem;
            margin: 0 auto;
        }

        .bg-white{
            width: 100vw;
            height: fit-content;
            background: #fff;
            box-shadow: 1px 2px 3px rgba(66, 66, 66, 0.363);
            padding-bottom: 50px;
            display: flex; 
            flex-direction: column;
            row-gap: 20px;
            align-items: center;
            justify-content: center;
            padding-top: 20px;
        }
        
        .button {
            display: block;
            background-color: #337ab7 !important;
            height: 50px;
            color: white;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            margin-top: 20px;
            margin-bottom: 15px;
            width: 85%;
            margin: 0 auto;
            box-sizing: border-box;
            font-size: 18px;
        }

        .cote{
            margin-top: 10px;
            margin-left: 20%;
            display: block;
        }

        .inp{
            width: 30%;
            margin-left: 10px;
            padding: 5px;
            border-radius: 3px;
        }

        .inp:focus{
            display: block;
            box-shadow: 0 0 5px #337ab7;
            outline: none;
        }

        .hidden-section {
            display: none;
            width: 80%;
            margin: 0 auto;
            margin-top: 20px;
        }

        .visible {
            display: block;
        }

        .image-result {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            display: none;
        }

        .result-container {
            margin-bottom: 20px;
            text-align: center;
        }

        .result-header {
            background-color: #fff3cd;
            padding: 10px;
            text-align: center;
        }

        .result-header p {
            margin: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            background-color: white;
            font-size: 0.9rem;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        .error {
            color: #842029;
            font-weight: bold;
            font-size: 0.9rem;
            display: block;
            width: 90%;
            margin: 0 auto;
            padding: 10px;
            background: #f8d7da;
            border: 1px solid #f5c2c7;
            margin-bottom: 30px;
        }

        @media (max-width: 600px) {
            body {
                margin: 5px;
                font-size: 0.9rem;
            }

            .attention {
                padding: 10px;
                font-size: 0.9rem;
            }

            .button {
                padding: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
    <script>
        const validAttestations = {
            // Attestation 1 (original)
            "2A973911-FB78-4823-8065-F4FF1B651F86": {
                date: "2024-10-25",
                nom: "MODI",
                prenom: "ESTELLE LOUISE",
                numero: "2254487",
                date_test: "30/10/2024",
                scores: {
                    comprehension_orale: {score: "644", niveau: "C2"},
                    comprehension_ecrite: {score: "690", niveau: "C2"},
                    expression_orale: {score: "20", niveau: "C2"},
                    expression_ecrite: {score: "18", niveau: "C2"}
                }
            },
            // Attestation 2
            "3B984022-GC89-5934-9176-G5GG2C762G97": {
                date: "2024-11-15",
                nom: "DUBOIS",
                prenom: "MARIE",
                numero: "2254488",
                date_test: "15/11/2024",
                scores: {
                    comprehension_orale: {score: "550", niveau: "C1"},
                    comprehension_ecrite: {score: "525", niveau: "C1"},
                    expression_orale: {score: "16", niveau: "C1"},
                    expression_ecrite: {score: "14", niveau: "B2"}
                }
            },
            // Attestation 3
            "4C995133-HD90-6045-0287-H6HH3D873H08": {
                date: "2024-12-01",
                nom: "MARTIN",
                prenom: "PIERRE",
                numero: "2254489",
                date_test: "01/12/2024",
                scores: {
                    comprehension_orale: {score: "445", niveau: "B2"},
                    comprehension_ecrite: {score: "450", niveau: "B2"},
                    expression_orale: {score: "12", niveau: "B2"},
                    expression_ecrite: {score: "12", niveau: "B2"}
                }
            },
            // Attestation 4
            "5D006244-IE01-7156-1398-I7II4E984I19": {
                date: "2024-12-10",
                nom: "PETIT",
                prenom: "SOPHIE",
                numero: "2254490",
                date_test: "10/12/2024",
                scores: {
                    comprehension_orale: {score: "330", niveau: "B1"},
                    comprehension_ecrite: {score: "345", niveau: "B1"},
                    expression_orale: {score: "10", niveau: "B1"},
                    expression_ecrite: {score: "10", niveau: "B1"}
                }
            },
            // Attestation 5
            "6E017355-JF12-8267-2409-J8JJ5F095J20": {
                date: "2024-12-20",
                nom: "ROBERT",
                prenom: "THOMAS",
                numero: "2254491",
                date_test: "20/12/2024",
                scores: {
                    comprehension_orale: {score: "225", niveau: "A2"},
                    comprehension_ecrite: {score: "235", niveau: "A2"},
                    expression_orale: {score: "8", niveau: "A2"},
                    expression_ecrite: {score: "8", niveau: "A2"}
                }
            },
            // Attestation 6
            "7F028466-KG23-9378-3510-K9KK6G106K31": {
                date: "2025-01-05",
                nom: "RICHARD",
                prenom: "JULIE",
                numero: "2254492",
                date_test: "05/01/2025",
                scores: {
                    comprehension_orale: {score: "600", niveau: "C1"},
                    comprehension_ecrite: {score: "580", niveau: "C1"},
                    expression_orale: {score: "17", niveau: "C1"},
                    expression_ecrite: {score: "16", niveau: "C1"}
                }
            },
            // Attestation 7
            "8G039577-LH34-0489-4621-L0LL7H217L42": {
                date: "2025-01-15",
                nom: "DURAND",
                prenom: "LUCAS",
                numero: "2254493",
                date_test: "15/01/2025",
                scores: {
                    comprehension_orale: {score: "500", niveau: "B2"},
                    comprehension_ecrite: {score: "485", niveau: "B2"},
                    expression_orale: {score: "14", niveau: "B2"},
                    expression_ecrite: {score: "13", niveau: "B2"}
                }
            },
            // Attestation 8
            "9H040688-MI45-1590-5732-M1MM8I328M53": {
                date: "2025-01-25",
                nom: "MOREAU",
                prenom: "EMMA",
                numero: "2254494",
                date_test: "25/01/2025",
                scores: {
                    comprehension_orale: {score: "400", niveau: "B1"},
                    comprehension_ecrite: {score: "415", niveau: "B1"},
                    expression_orale: {score: "11", niveau: "B1"},
                    expression_ecrite: {score: "11", niveau: "B1"}
                }
            },
            // Attestation 9
            "0I051799-NJ56-2601-6843-N2NN9J439N64": {
                date: "2025-02-05",
                nom: "LAURENT",
                prenom: "LOUIS",
                numero: "2254495",
                date_test: "05/02/2025",
                scores: {
                    comprehension_orale: {score: "670", niveau: "C2"},
                    comprehension_ecrite: {score: "655", niveau: "C2"},
                    expression_orale: {score: "19", niveau: "C2"},
                    expression_ecrite: {score: "18", niveau: "C2"}
                }
            },
            // Attestation 10
            "1J062800-OK67-3712-7954-O3OO0K540O75": {
                date: "2025-02-15",
                nom: "SIMON",
                prenom: "CHLOÉ",
                numero: "2254496",
                date_test: "15/02/2025",
                scores: {
                    comprehension_orale: {score: "300", niveau: "B1"},
                    comprehension_ecrite: {score: "315", niveau: "B1"},
                    expression_orale: {score: "9", niveau: "A2"},
                    expression_ecrite: {score: "9", niveau: "A2"}
                }
            }
        };

        function toggleSection() {
            const section = document.getElementById('verification-section');
            const button = document.querySelector('.button');
            section.classList.toggle('visible');
            if (section.classList.contains('visible')) {
                button.classList.add('hidden-button');
            }
        }

        function showImage(event) {
            event.preventDefault();

            const numAttestation = document.getElementById('num_attestation').value.trim();
            const dateSession = document.getElementById('date_session').value.trim();
            const captchaInput = parseInt(document.getElementById('captcha').value.trim());
            const correctCaptcha = 8;

            if (captchaInput !== correctCaptcha) {
                showError('Le code de securite est incorrect');
                return;
            }

            const attestation = validAttestations[numAttestation];
            
            if (!attestation || attestation.date !== dateSession) {
                showError('Numéro d\'attestation ou date de session invalide');
                return;
            }

            const imageResult = document.getElementById('image-result');
            const verificationSection = document.getElementById('verification-section');
            
            // Mettre à jour les informations de l'attestation
            const headerInfo = imageResult.querySelector('.result-header');
            headerInfo.innerHTML = `
                <p>Résultats pour le « <strong>TCF Canada – Test de connaissance du français pour le Canada</strong> » du <strong>${attestation.date_test}</strong> pour le candidat n°<strong>${attestation.numero}</strong>.</p>
                <p>Nom : <strong>${attestation.nom}</strong><br>Prénom : <strong>${attestation.prenom}</strong></p>
            `;

            // Mettre à jour le tableau des résultats
            const tableContent = `
                <tr>
                    <th>Épreuve</th>
                    <th>Score/Note</th>
                    <th>Niveau CECR</th>
                </tr>
                <tr>
                    <td>Compréhension orale</td>
                    <td>${attestation.scores.comprehension_orale.score}</td>
                    <td>${attestation.scores.comprehension_orale.niveau}</td>
                </tr>
                <tr>
                    <td>Compréhension écrite</td>
                    <td>${attestation.scores.comprehension_ecrite.score}</td>
                    <td>${attestation.scores.comprehension_ecrite.niveau}</td>
                </tr>
                <tr>
                    <td>Expression orale</td>
                    <td>${attestation.scores.expression_orale.score}</td>
                    <td>${attestation.scores.expression_orale.niveau}</td>
                </tr>
                <tr>
                    <td>Expression écrite</td>
                    <td>${attestation.scores.expression_ecrite.score}</td>
                    <td>${attestation.scores.expression_ecrite.niveau}</td>
                </tr>
            `;
            imageResult.querySelector('table').innerHTML = tableContent;

            imageResult.style.display = 'block';
            verificationSection.style.display = 'none';
        }

        function showError(message) {
            const errorMessage = document.getElementById('error-message');
            errorMessage.style.display = 'block';
            errorMessage.textContent = message;
        }</antArtifact>
